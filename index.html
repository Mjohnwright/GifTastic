<head>
  <meta charset="utf-8">
  <title>Stop: It's Giphy time</title>
  <!-- Added link to the jQuery Library -->

</head>


<body>
  <div id="cityArray">

  </div>


  <form id="city-form">
    <lablel for="city" input="text">Add a city</lablel>
    <input type="text" id="city-input"></input>

    <input id="addCity" type="submit" value="submit">
    </br>
  </form>


  <div id="city">

  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <!-- JAVASCRIPT -->
  <script type="text/javascript">
    
    // City Array
    var cityGiphy = ["London", "Mexico City", "Quebec", "Copenhagen", "Prague", "Cairo",
      "Constantinople", "Tokyo", "Budapest", "Reykjavik", "Tehran", "Seoul", "Berlin"
    ];
    // Not sure if I need this
    var cityDiv = $("<div>");

    // For each city in the array, creating a button
    $.each(cityGiphy, function (i, val) {
    
      var cityButton = $("<button>" + val + "</button>");


    // Writing the button name on the DOM
      $("#cityArray").append(cityButton);
      console.log(val);
    })

    // When user clicks a button it launches runGiphy function
    $("button").on("click", function () {
      var buttonValue = $(this).html();
      console.log(buttonValue);


    


    // FUNCTION runGiphy
    function runGiphy() {

    // query set to search for CITY + API key + limit to 10 responses
      var queryURL = "https://api.giphy.com/v1/gifs/search?q=" +
      buttonValue + "&api_key=5buFvdZ3WSNHFzbFytMWBbjytoPx7bbD&limit=10";

      // Launch the API query using the URL from above
      $.ajax({
          url: queryURL,
          method: "GET"
        })
        //Promise from the Giphy
        .then(function (response) {

          //creating a variable from the API response
          var results = response.data;

          // Looping through each result item (REQUESTED 10 ITEMS)
          for (var i = 0; i < results.length; i++) {

            // Creating a paragraph tag with the result item's rating
            var p = $("<p>").text("Rating: " + results[i].rating);

            // Creating and storing an image tag
            var cityImage = $("<img>");
            // Setting the src attribute of the image to a property pulled off the result item
            cityImage.attr("src", results[i].images.fixed_height.url);

            // Appending the paragraph and image tag to the cityDiv
            cityDiv.append(p);
            cityDiv.append(cityImage);

            // Prependng the cityDiv to the HTML page in the "#city" div
            $("#city").prepend(cityDiv);
          }

        })

    }
    
    runGiphy();
        })
        
  
  </script>
</body>

</html>


<!-- API key for Giphy: 5buFvdZ3WSNHFzbFytMWBbjytoPx7bbD -->
<!-- //  .val() is used to get value from an input -->
